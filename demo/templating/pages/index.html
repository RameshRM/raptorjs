<html>
    <head>
        <title>Raptor Templating Demo</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <!-- [raptor-include: head] -->
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    </head>
    <body>
        <table width="100%">
            <tr>
                <td width="50%">
                    <b>Template</b>
                    <textarea id="template" style="width: 100%;" rows="12">&lt;c:template 
    xmlns:c=&quot;core&quot; 
    params=&quot;name&quot;&gt;
    
    Hello $name!
    
&lt;/c:template&gt;</textarea>
                </td>
                <td width="50%">
                    <b>Data</b>
                    <textarea id="data" style="width: 100%;" rows="12">{
    name: "World"
}</textarea>
                </td>
            </tr>
            <tr>
                <td width="50%">
                    <b>Compiled</b>
                    <textarea id="compiled" style="width: 100%;" rows="12"></textarea>
                </td>
                <td width="50%">
                    <b>Output</b>
                    <textarea id="output" style="width: 100%;" rows="12"></textarea>
                </td>
            </tr>
            
        </table>
        <button id="compileButton" type="button">Compile</button>
        <!-- [raptor-include: body] -->
        <script>
        $("#compileButton").click(function() {
            var templateSrc = $("#template").val();
            var compiler = raptor.require('templating.compiler');
            var templateName;
            
            var compiledSrc = compiler.compile(templateSrc, "test", {
                defaultTemplateName: "test",
                nameCallback: function(name) {
                    templateName = name;
                }
            });
            
            $("#compiled").val(compiledSrc);
            eval(compiledSrc);
            
            var jsonData = $("#data").val();
            var data = eval("(" + jsonData + ")");
            var output = raptor.require('templating').renderToString(templateName, data);
            $("#output").val(output);
        });
        </script>
    </body>
</html>

